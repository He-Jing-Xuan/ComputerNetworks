

# 计算机网络笔记

## 第一章

### 1.1 计算机网络功能

- **数据通信**
- **资源共享**
- 分布式处理：多台计算机各自不同承担同一工作任务的不同部分（Hadoop平台）
- 提高可靠性:当一台机器坏了就换一台
- 负载均衡：各计算机之间配合 

### 1.1.2计算机网络的组成

- 组成部分：硬件，软件，**协议**
- 工作方式：**边缘部分**和**核心部分**
- 功能组成：通信子网和资源子网

### 1.1.3 计算机网络的分类

- 按分布范围：广域网，城域网，局域网，个人区域网
- 按使用者分类：公用网，专用网
- 按交换技术分：电路交换，报文交换，分组交换
- 按拓扑结构分：总线型，星形，环形，网状型
- 按传输技术分：广播式（共享公共通信信道）和点对点网络（使用分组存储转发和路由选择机制）

### １.２.３因特网发展的三个阶段

- 1.标准组织
  - 制定协会：因特网协会；协议开发技术协会。
- 2.指定标准
  - 所有标准由**RFC的形式**在因特网发表。 -
  - 　制定阶段：
    - **因特网草案，**
    - **建议标准**，从这个阶段开始成为RFC文档
    - **草案标准**，
    - **因特网标准**。

### 1.2.4 速率相关性能指标

## 1.1 速率

定义：连接在计算机网络上的主机在数字信道上传送数据位数的速率
单位:b/s,Kb/s,Mb/s,Tb/s，
如果用字节表示，则是B/s,KB/s,MB/s,TB/s
1Byte=8Bit

## 1.2 带宽

- 带宽用来表示网络中的通信线路传输数据的能力，通常指**单位时间内从网络中的某一点到另一点所能通过的“最高数据率”。单位是比特每秒**

- 在计算机网络中，指的是**网络设备所支持的最高速度**，单位同速率，是**理想条件下最高速率**

## 1.3 吞吐量

- 指的是单位时间内通过某个网络的数据**总**量
- 吞吐量受 网络的带宽或网络的额定速率的限制



## 个人理解

速率就是实际网速，带宽是理论网速（长城宽带警告），吞吐量是一个或多个设备的综合速率，比如说1000m宽带的路由器连着三部手机，每部手机都是10mb/s看片，那么速率就是10mb/s，带宽是宽带的1000m，路由器吞吐量是30mb/s，即三者之和

------

### １.３ 因特网组成

#### 重点：组成，主机连接方式，通信方式

#### １.３.１　边缘部分

- 因特网边缘是指：因特网上的所有主机。
- 通信方式；客服－服务器（ｃｓ），对等方式（ｐ２ｐ）
  - ｃｓ：服务与被服务的关系。客户是请求方，服务器是服务提供方。
    - 通信特点：
      - 客户程序：通信时主动向服务器发起通信，不需要特殊的硬件和操作系统
      - 服务器程序：提供专门的服务，一直运行被动的同时接受多个客户的服务请求，需要强大的硬件和操作系统。
  - 对等连接方式-->p2p
    - 1.通信模式:两个主机都运行了对等连接软件，他们可以进行平等，对等连接通信。
    - 2.通信特点：对等的每一个主机即是客户端又是服务器。



### 1.3.2 因特网的核心部分

###### 向网络边缘中的大量主机提供连通性。关键是路由器。提供方式：电路交换，报文交换和分组交换。

- 1.电路交换
  - 经过：建立连接-通话-释放资源；通话的两个用户始终占用端到端的通信资源。
- 2.报文交换
  - 要发送的整块数据成为一个“报文”。通过路由转发
- 3.分组交换
  - 分组交换技术采用**存储转发**的形式，把数据划分成一个个更小的等长数据段。
  - 分组交换的原理：在发送段，先把较长的报文划分成较短的，固定长度的数据段。
  - 特点：
    - 高效，动态分配传输带宽，逐段占用通信链路。
    - 灵活，以分组为传送单位和查找路路由。
    - 迅速，不必先建立连接就能向其他主机发送分组；充分使用链路的带宽。
    - 可靠，完善的网络协议；自适应的路由选择协议使用网络有很好的生存性。

| 报文                                        |
| ------------------------------------------- |
| 11010001101010101101010101110001            |
| 数据 　　 　  　  数据　  　 　 　  数据    |
| 首部：分组1。　 首部： 分组2.　 首部：分组3 |

#### 总结：

- 电路交换：整个报文的比特流连续的从源点直达终点，好像一个管道中传送
- 报文交换：整个报文先传送到相邻节点，全部存储下来后查找转发表，转发到下一个结点。
- 分组交换，单个分组（报文的一部分）传送到相邻结点，存储下来后查找转发表，转发到下一个结点

------

### 1.5计算机网络的类别

#### 1.5.2计算机的分类

- 1.按作用范围分为：广域网，城域网，局域网，个人区域网。
- 2.按网路的使用者：公用网，专用网，接入网。
- **公用网**：电信公司出资建造的大型网路。
- **专用网**：某个部门，行业为各自特殊业务工作需要而建造的网络。
- **接入网**：从某个端系统到另一个端系统的路径中，由这个端系统到第一个路由器之间的一些物理链路所组成。

------

### 1.6 计算机网络的性能

#### 1.6.1计算机网络的性能指标

- 1.**速率**：计算机网络上主机**在数字信道上传送数据的速率**，也称数据率

- 2.**带宽**：表示单位时间从网络中某一个点到另一个点所能通过的最高数据率

- 3.**吞吐量****：单位时间内通过某个网络的数据量**

- 4

  ##### 时间延迟

  ：数据从网络的一端传送到另一端所需的时间。

  - **发送时延**：主机或路由器发送**数据帧**所需要的时间。：从发送第一个比特算起到该分组的最后一个比特发送完毕所需要的时间。=数据长度/信道带宽。

  - **传播时延**：在**信道中传播一定距离需要花费的时间**==>取决于电磁波传播速度和链路长度。=信道长度/电磁波在信道传播的速率。

  - **处理时延**：主机或路由器在**收到分组时要花费一定时间进行处理**。

  - **排队时延**：分组在进入路由器后要先在输入队列中等待处理。排队时延的长短取决于网络中的通信量。 -5.**时延带宽积** -6.**往返时间**：从发送方发送数据开始，到发送方收到来自接收方的确认总共经历的时间。 -7.利用率

  - **往返时延RTT**：从发送方发送数据开始，到发送方收到接收方确认的总共经历的时延。RRＴ越大在收到确认之前，可以发送的数据越多。

    - RTT包括：**往返传播时延**和末**端处理时间**

  - **信道利用率**：**指出某信道有百分之几的时间是被利用的。**

  - **网络利用率**：**全网络的信道利用率的加权平均值**。

    信道利用率并非越高越好

    - D=D0/(1-U) D :表示网络当前的时延。
  - D0表示网络空间的时延。
    
    - U 表示网络的利用率。

#### 1.6.2计算机网络的非性能指标

费用，质量，标准化，可靠性，可扩展性和qAw1









 nmm m，易于管理和维护。

------

### 重点：1.7 计算机网络的体系结构

#### 1.7.1计算机网络体系结构的形成

**将复杂的计算机网络，转化成各个小部分。**

### 分层结构

- **为什么要分层，分层要做什么？**
  - 发起通信的计算机必须将数据通信的通路进行激活。
    （2）要告诉网络如何识别目的主机。
    （3）发起通信的计算机要查明目的主机是否开机，并且与网络连接正常。
    （4）发起通信的计算机要弄清楚，对方计算机中文件管理程序是否已经做好准备工作。
    （5）确保差错和意外可以解决。

#### 1.7.2 协议与划分的层次

- **计算机网络的各层次及其协议的集合，称为网络的体系结构。**
- 网络协议主要由三个要素组成
  - **语法**：数据与控制信息的结构或格式
  - **语义**：需要发出何种控制信息，完成何种动作以及做出何种响应；
  - **同步**，事件实现顺序的详细说明。

#### 具有7层的协议体系结构OSI

- **应用层**
  - 所有能和 用户交互产生网络流量的程序
  - 典型的应用层服务:文件传输FTP，电子邮件SMTP，万维网HTTP
- **表示层**
  - 用于处理在两个通信系统中交换信息的表示方式
  - 功能：
    - **数据格式变换**
    - **数据加密解密**
    - **数据压缩和恢复**
- **会话层**
  - 向表示层实体／用户进程提供**建立连接**并在连接上**有序地传输数据**　，也是**建立同步**
  - 功能:
    - 建立,管理,终止会话
    - 使用校验点可使会话在 通信失效时从校验点/同步点继续恢复通信,实现数据同步
    - 适用于传输大文件
- **传输层**
  - 负责主机中**两个进程**的 通信,即**端到端**的通信**.传输单位是报文段或用户数据报**.
  - 功能:
    - **可靠传输,不可靠传输**
    - **差错控制**
    - **流量控制**
    - **复用分用**
      - **复用:多个应用层进程可同时使用下面运输层的服务**
      - **分用:运输层把收到的信息分别交付给上面应用层中相应的进程.**
- **网络层**
  - 主要任务是把**分组从源端传到目的端**,为**分组交换网上的不同主机提供通信服务**.网络层传输单位是**数据报.**
  - 功能:
    - **路由选择**
    - **流量控制**:协调发送端和接收端速度控制
    - **差错控制**
    - **拥塞控制**:若所有节点都来不及接受分组,而要丢弃大量分组的话,网络就处于拥塞状态.因此要采取一种措施,缓解这种拥塞.
- **数据链路层**
  - 把网络层传下来的数据报组装成帧. 传输单位就是帧.
  - 功能
    - **成帧**
    - **差错控制**
    - **流量控制**
    - **访问控制**

- **物理层**

  - 主要任务是在物理媒体上实现比特流的透明传输. 物理层传输单位是比特.

  - 透明传输:不管所传数据是什么样的比特组合,都应当能够在链路上传送.

  - 功能:

    - **定义接口特性**
    - **定义传输模式:单工,半双工,全双工.**

    - 定义传输模式
    - 比特同步
    - 比特编码

#### 1.7.3具有五层协议的体系结构。

- **应用层**

  ：应用层的任务是通过应用的进程间的交互来完成特定网路应用。

  - 代表协议：HTTP ，SMTP，FTP。

- **传输层**

  ：负责向两个主机中进程之间的通信提供通用的数据传输服务。

  - 代表协议:传输控制协议，用户数据报协议
  - 传输单位：用户数据报

- **网络层**

  ：为分组交换网上的不同主机。提供通信服务。在发送数据时，网路层把运输层产生的报文段或用户数据封装成分组或包进行传输。选择合适的路由，使得源主机运输层所传下来的分组能够通过网络中的路由器找到目的主机。

  - 代表协议： IP
  - 数据传输单位：**分组，包**

- **数据链路层**

  ：在两个相邻结点之间传送数据时，数据链路层将网络层交下来的iP 数据报 组装成 数据帧，在两个相邻结点间的链路上传送帧。

  - 数据传输单位：帧。

- **物理层**：在物理层上所传数据的单位是比特

#### 1.7.4 实体，协议，服务和数据访问点。

- 实体：表示任何可发送或接收信息的硬件或软件进程。
- 协议是控制两个对等实体进行通信的规则集合。
- 在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。
- 要实现本层协议，还需要使用下层所提供的服务**。**

## 第二章物理层

#### 2.1物理层的基本概念

- 物理层的主要任务描述为**确定与传输媒体的接口一些特性**
  - **机械特性**：指明接口所用接线器的形状和尺寸，引线数目和排列，固定和锁定装置。
  - **电气特性**：指明在接口电缆的各条线上出现的电压范围
  - **功能特性**:指明某条线路上出现的某一电路电压表示何种意义。
  - **规程特性**：指明对于不同功能的各种可能事情的出现顺序。

#### 2.2.1数据通信的基础知识

一个数据通信系统可划分为三大部分：**原系统，传输系统和目的系统**。

- **原系统**：
  - **源点**：源点设备产生要传输的数据。
  - **发送器**：源点生成的数字比特流通过发送器编码后才能够在传输系统中进行传输。
- **目的系统**：
  - 接收器：接收传输系统传送过来的信号，并将它转换成能够被目的设备处理的信息。
  - 终点：获取传送来的数字比特流，把信息输出。
- 模拟数据--->放大器，调制器---->模拟信号
- 模拟数据--->PCM编码器--------->数字信号
- 数字数据---->调制器----->模拟信号
- 数字数据---->数字发送器----->数字信号

------

#### 2.2.2有关信道的基本概念

- **单向通信**（单工通信）：只有一个方向的通信而没有反方向的交互。
- **双向交替通信**（半双工通信）:都能发送信息，但不能同时发送和接收---对讲机
- **双向同时通信**（全双工通信）：双方同时发送和接受信息
- **基带信号**：将数字信息1或0直接用不同的电压表示出来，然后送到线路上传输
- **宽带信号**：·将基带信号进行调制后形成的频分复用模拟信号

###### 调制：

- 基带调制
- 带通调制
  - 调幅：**载波的振幅**随基带数字信号而变化。0对应无载波，1对应有载波。
  - 调频：**载波频率**随基带数字信号变化
  - 调相：载波的**初始相位**随基带信号变化。

###### 码元传输率:

- 码元传输的速率越高，或信号传输的距离越远，在信道的输出端的波形的失真越严重。
- 

------

#### 2.2.3信道极限容量

- 香容公式 ![香农公式](file:///C:/Users/asus/AppData/Local/YNote/data/qq50EB5AF35806D61E6ABFD8602AFA25D5/4065eb50c53c4c8888033bff75a9b48c/%E9%A6%99%E5%86%9C%E5%85%AC%E5%BC%8F.png?ynotemdtimestamp=1597474988280)
- **信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高。**
- 只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法实现无差错的信息传输。
- **实际信道上的信息传输速率比极限传输速率低不少**。

------

### 2.3 物理层下的传输媒体

传输媒体：数据传输系统在发送器和接收器之间的物理通路。**导引型**传输媒体和**非导引型**传输，媒体。

#### 2.3.1导引型传输媒体。

- 导引型 包括：双绞线，同轴电缆和光缆。
- 同轴电缆：具有很好的抗干扰型。
- 光缆：利用光导纤维传递光脉冲来进行通信。

#### 非导引型传输媒体

### 2.4信道复用技术

#### 2.4.1 频分复用，时分复用，和统计时分复用

- **频分复用**：所有用户在**相同时间占用不相同带宽资源**。
- **时分复用**：用户时分复用的所有用户是**在不同的时间占用同样的带宽频率**。信道利用率不高。 ![时分复用](file:///C:/Users/asus/AppData/Local/YNote/data/qq50EB5AF35806D61E6ABFD8602AFA25D5/28ea514bf3f44e0296b5fe2ce429fc73/%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8.jpg?ynotemdtimestamp=1597474988280)
- **统计时分复用**：不是固定分配时隙，而是**按需求动态地分配时隙**。在每个时隙中，还必须有**用户的地址信息**，是统计时分复用必须要有的和不可避免的一些开销。

------

#### 2.4.2波分复用

- 波分复用WDM就是光的频分复用。－－－波长分组。

#### ２.４.３码分复用CDMA

- 各用户经过特殊挑选的不同码型，因此不会造成干扰。**具有强抗干扰性**。

  **每一个比特时间划分为m个短的间隔，称为码片**

  - **码片序列：每个站被指派一个唯一的mbit码片序列。**
    - 发送比特1，则发送自己的mbit序列
    - 发送比特0，则发送码片序列的二进制反码。
  - 用 -1 表示 0， +1表示1
    - 码片序列特性：
      - **互相正交**：每个站分配的码片序列不仅必须各不相同，并且还必须正交。
      - **内积为1/-1**：任何一个码片向量和该**码片向量自己的规格化****内积**都是1.何其反码的向量的规格化**内积值**是-1.

- 码片复用工作原理 ![工作原理](file:///C:/Users/asus/AppData/Local/YNote/data/qq50EB5AF35806D61E6ABFD8602AFA25D5/afb2bcb7583c47029a9bbe189d0ce502/%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.png?ynotemdtimestamp=1597474988280)

- 习题：![习题](file:///C:/Users/asus/AppData/Local/YNote/data/qq50EB5AF35806D61E6ABFD8602AFA25D5/bbf6bbfb6fc946439b34ba8247fe31f0/%E4%B9%A0%E9%A2%98.png?ynotemdtimestamp=1597474988280)

------

### 2.5 数字传输系统

- 同步光纤网是i一个数字传输的标准。
  - 体系架构
    - 光子层：负责跨越光缆的比特传送
    - 段层：在光缆上传送STS-N帧
    - 线路层：负责路径层的同步和复用
    - 路劲层处理路径端接设备PTE之间的业务的传输

### ２.６宽带接入技术

#### ２.６.１　ADSL技术

- 非对称数字用户线。

------

#### 2.6.2 光纤同轴混合网

------

#### 2.6.3 FTTX技术

## 第三章数据链路层

### 3.1 使用点对点信道的数据链路层

#### 3.1.1数据链路和帧

- **链路**：是一条无源的点到点的物理线路端，中间没有任何其他的交换结点。
  - **数据链路**：除了物理线路外，还必须有**通信协议来控制这些数据的传输。**把实现这些协议的软件和硬件加到链路上，就构成了数据链路。——》 **协议软件和硬件构成数据链路** 
- **数据链路层每传一次的数据称为帧**。 帧只是一种数据。

#### 3.1.2基本问题

- 1.**封装成帧：在一段数据的前后分别添加首部和尾部**。
  - 特点：
    - 首部尾部包括许多必要的控制信息
    - 规定了最大传送单元
    - **SOH 表示帧的首部，EOT 表示尾部。**
- 2.透明传输：无论什么样的比特组合的数据都给通过这个数据链路层。
- 差错检测：
  - 冗余校验：CRC
    - 在发送端，先把数据划分为组，假定每组Ｋ个比特，现假定呆传送的数据M＝１０１０００１１０１（ｋ＝１０）．CRC运算就是在数据M的后面添加供差错检测用到ｎ位冗余码，然后构成一个帧发送出去，一共发送（ｋ＋ｎ）位。
    - 在接收端：把接收到的数据以帧为单位进行CRC校验：把收到的每一个帧都除以同样的除数P，然后检测得到的余数R。
    - 在接收端对收到的每一帧经过CRC运算后有两种情况：
      - 若余数R=0，则判定这个帧没差错。
      - 反之有差错，但无法确定是哪一位或那几位出错。 -在数据后面添加冗余码称为帧检测序列FCS。
- 循环冗余检测CRC和帧检验序列FCS并不等同
  - CRC是一种常用的检错方法，而FCS　是添加在数据的冗余码。
  - FCS可以用CRC这种方法得出，但CRC并不是唯一获得FCS 的唯一方法。

------

- 流量控制：
  - 在发送结点：
    - 从主机取一个数据帧
    - 从数据帧送到数据链路层的发送缓存
    - 将发送缓存中的数据帧发送出去。
    - 等待
    - 若收到接收端发过来的信息，则从主机取一个新的数据帧，然后转到 第二步。
  - 在接收结点：
    - 等待
    - 若收到由发送结点发过来的数据帧，则将其放入数据链路层的接收缓存。
    - 将接收缓存中的数据帧上交主机。
    - 向发送接待你发一信息，表示数据帧已被接收。
    - 等待。

### 3.2 点对点协议PPP

- ppp协议：**用户计算机**和**ISP**进行通信时的协议
  - 特点：
    - 简单
    - 封装成帧
    - 透明性
    - 多种网络层协议
    - PPP还必须能够再多种类型的链路上进行传输
    - 差错检测
    - 检测连接状态：PPP协议必须具备一种机制能自动检测出链路是否正常
    - 最大传送单元
    - 网络层地址协议
    - 数据压缩协商

------

### 3.2.1  P2P协议的组成

- 一个将**数据报封装到串行链路**的方法
- 一个用来**建立，配置和测试数据链路连接的链路控制协议LCP** ---无论层面
- 一套**网络控制协议NCP**

### 3.2.2   P2P协议的帧格式

- 各字段的意义
- 标志字段F： --0x7E 开始和结束符合
- 地址字段FF
- 控制字段03
- 将信息中的每一个0x7e转换成两个字节序列（0x7D,0x5E）
- 若信息字段中出现0x7D 字节，则将其转变成为2字节序列（0x7D,0x5D）
- 若信息字段中出现ASCII码的控制字符，则在该字符前面加入一个0x7D 字节，同时将该字符的编码加以改变。

#### 字节填充

当**信息字段**中出现和**标志字段**相同的**比特组合**时，则**进行字节填充的办法使得数据部分能够完整的传送到接收端**

- **零比特填充 : PPP协议在SONET/SDH链路时，是使用**

  **同步传输**

  （**一连串的比特连续传送**）而不是

  异步

  （**z逐个字符传送**）。在这种情况下，协议采用零比特填充方法来实现透明传输。

  - 零比特填充具体做法： 在发送是哪个的，先**扫描整个信息段**。只要发现**有5个连续的1，则立即填入一个0；**

### 3.2.3PPP协议的工作状态

- 用户拨号接入ISP——→端机向ISP发送一系列链路控制协议LCP分组，→进行网络层配置→网络层协议NCP向端机分配IP地址
- PPP工作状态![20180919134728401](file:///C:/Users/asus/AppData/Local/YNote/data/qq50EB5AF35806D61E6ABFD8602AFA25D5/35e28137c02442769c97210188fbe9cd/20180919134728401.png?ynotemdtimestamp=1597474988280)使用广播通信的数据链路层 **局域网主要使用的就是广播信道**

#### 局域网的数据链路层

- 局域网的特点：**网络为一个单位所拥有，地理范围和站点数目有限**
  - 局域网的优点：
    - 1）**具有广播功能**
    - 2）**便于系统的扩展和演变**
    - 3）**提高了系统的可靠性，可用性。生存性**
- 局域网的分类：星型网，环形网，总线网（最为著名的以太网就是总线网）
- 共享信道的两种技术方法：
  - 1)**静态划分信道**
  - 2)**动态媒体解入控制**（随机接入，受控接入）
- 由于商业竞争关系而未能形成统一的局域网标准，所以鉴于此将局域网的数据链路层划分为了两个子层——**逻辑链路控制层LLC和媒体接入控制层MAC层，MAC层用来解决媒体输入相关的问题**

------

### 适配器的作用

- 网络接口板又称**通信适配器或网络接口卡NIC，或网卡**
- 网卡的重要功能
  - **进行串行/并行转换**
  - **对数据进行缓存**
  - **在计算机的操作系统安装设备驱动程序**
  - 实现以太网协议。 ![2018091915553234](file:///C:/Users/asus/AppData/Local/YNote/data/qq50EB5AF35806D61E6ABFD8602AFA25D5/7d76d879751444e99e124f9763673c9c/2018091915553234.png?ynotemdtimestamp=1597474988280)

------

### 3.3.2CSMA/CD协议

- 基于以太网的广播通信方式采用的具有检测功能的协议
  - 措施：
    - 采用灵活的无连接的工作方式，不必先建立连接就可以直接发送数据
    - 以太网对发送的数据帧不进行编号，也不要求对面发回确认
    - 这样做的理由是局域网信道的质量很好，因信道质量产生差错的概率是很小的
  - 服务：
    - 以太网提供的服务是不可靠的交付，即尽量最大努力的交付
    - 当目的站收到差错的数据帧时就丢弃此数据帧，差错的纠正由高层决定
    - 如果高层发现丢失了一些数据而进行重传，但以太网并不知道这是一个重传的帧。

#### 载波监听/多点接入/碰撞检测

- 多点接入：表示许多计算机以多点接入在一根总线上
- 载波监听:指每一个站在发送之前先要检测一下总线上是否有其他计算机在发送数据。如果有暂时不要发送数据，以免发送碰撞
- 碰撞检测：计算机边发送数据边检测信号上的信号电压大小
  - 当几个站同时在总线上发送数据时，总线上的信号电压摆动值就会增加
  - 在一个站检测到信号电压摆动值超过一定的门限值时，认为总线上至少有 两个站 同时 发送数据，表明发生了碰撞。
- 所谓碰撞就是发生了冲突。
- 检测到碰撞后：立即停止发送，免得继续浪费网络资源，等待随机时间后再发送。
- 特性：
  - 使用CSMA/CD协议的以太网不能进行全双工通信而只能进行双向交替通信即半双工通信
  - 这种发送的不确定性使得整个以太网的平均通信量远远小于以太网的最高数据率。

##### 争用期

- 最先发送数据帧的站，最多经过**两倍的端到端往返时延**就可知道发送的数据帧是否遭受了碰撞。
- 这个往返时延称为争用期或碰撞窗口
- 经过争用期这段时间还没检测到碰撞，才能肯定这次不会发生碰撞。

##### 二进制指数类型退避算法

这是一种动态退避算法，在争用期（具体为51.2μs）内可传送512bit，即64字节，所以发生碰撞的时间就在站点发送512bit的时间内（也就是说，如果站点在发送一个完整的512字节的过程中没有检测到碰撞信号，则说明以后的发送都不会发生碰撞，可以完整的发送完整个数据帧）

具体的算法原理在这就不详细说明了，在动态退避的过程中，为了使所有的站点发送的每一个数据帧逗都能保证得到想要的发送结果信息（是否发生碰撞），则规定一个数据帧的最小长度应该为512bit，这样，每个站点在发送所有的数据帧时都能够在发送完之前知道是否发生了碰撞，是否需要重传（如果小于最小帧长64字节，则有可能在完全发送完之后才发生碰撞，这样发送站点就不知道发生了碰撞，即不会重传该帧），因此，在以太网中多点信道中，凡长度小于64 字节的帧都是由于冲突而发生异常终止的无效帧，在接收站点的适配器中即可方便判断出该结果；

规定帧间最小间隔9.6μs，是为了使刚刚收到数据帧站点能够有时间对手的数据帧作出反应

##### 强化碰撞

- 在发生碰撞之后除了立即停止发送数据之外，还要发送32bit或48bit 的人为干扰信号，目的是为了能够让所有站点都知道发生了碰撞
- 

### 3.4 使用广播信道的以太网

#### 3.4.1 传统以太网

- 1 MAC层连接方式 传统以太网可使用的传输媒体有四种： 铜缆（粗缆或细），铜线（双绞线），光缆

##### 集线器

双绞线以太网的出现，是局域网发展史上的一个重要的里程碑

集线器的特点： 集线器使用电子器件模拟实际电缆线的工作，所以使用集线器的以太网在逻辑上还是一个总线网，各站逻辑上共享总线。而且是用的还是协议；

集线器的接口通过两对双绞线与计算机上的适配器相连；一个集线器像是一个多接口的转发器；

集线器工作在物理层，每个接口只简单地转发比特，不进行碰撞检测，

集线器采用专门的芯片，进行自适应串音回波抵消；（使得同一接口的强信号不会对弱信号产生干扰）

## 第四章 网络层

#### 4.1网络层提供的服务

- 网络层为接在网络上的主机所提供的服务有两大类：
  - **无连接的网络服务**（数据表服务）
  - **面向有连接的网络服务**（虚电路服务）
- 两种服务的优缺点
  - 网络传送的报文长度，在很多情况下都很短 用数据报经济迅速，而虚电路为了传送一个分组而建立虚电路和释放虚电路浪费网络资源。
  - 使用数据报时每个分组必须携带完整的地址信息，在虚电路的情况则不需要，仅需要一个虚电路号码标志。
  - 在使用数据报时，主机承担端到端的差错控制和流量控制。
  - 在使用虚电路时，分组按顺序交付，网络可以负责差错控制和流浪控制。
  - 

------

#### 4.2IP协议

- 网络协议IP是ＴＣP /IP 中两个最主要的协议之一，也是最常见的因特网标准协议之一。与IP 协议配套使用的有三个协议 **：地址解析协议--RARP，网际控制报文协议-ICMP，网际管理协议IGMP，**

#### 4.2.1虚拟互联网络

- 互联在一起的网络要进行通信，会遇到许多问题需要解决如：
  - 不同的寻址方案，
  - 不同的最大分组长度，
  - 不同的网络超时控制
  - 不同的网络接入机制
  - 不用的差错恢复方法
  - 不同的状态报告方法
  - 不同的路由选择技术
  - 不同的用户接入机制
  - 不同的服务
  - 不同的管理和控制方式
- 网络连接需要的中间设备：
  - 物理层使用的中间设备叫做转发器
  - 数据链路层叫网桥
  - 网路层的中间设备叫路由器
  - 网络层以上使用的中间设备叫做网关，用网关连接的两个不兼容的系统需要在高层进行协议转换。

#### 4.2.2分类的IP地址

- IP地址及其表示形式
- 32bit的标识符
- IP地址的编址方法
  - 分类的IP地址
  - 子网划分
  - 构成超网
- 分类IP地址
  - 每一类的地址都是由两个固定长度的字段组成，一个是网络号，net-id标志所连接到3的网络，一个是host-id标志该主机的两级的IP地址。

##### 路由转发分组的步骤

- 通过网络号找到目的网络
- 利用主机号host-id将数据报直接交付给目的主机

##### 点分十进制：把32bit的IP地址每隔8bit二进制转换成十进制数，则可提高可读性

#### 常用的三类IP地址：

- 本网络：A类地址中网络号全为0的IP地址
- 环回测试：A类地址中网络号为01111111的IP地址用作本地软件环回测试本主机的进程之间的通道
- 

**路由器仅根据目的主机IP地址中的网络号来转发分组**

- 实际IP地址是主机与网络链路之间的一条链路的标识（一个主机连接在两个不同的网络上时，该主机对应的就有两个IP地址）
- 一个网络是指具有相同网络号的主机的集合，因此用网桥或转发器连接起来的若干局域网属于同一个网络
- 互联网上的网络号都是平等的，与其范围大小没有关系

### 互联网中的IP地址

- 同一个局域网上的主机或路由器的ip地址中的网络号必须是一样的。
- 路由器总是具有两个或两个以上的IP地址。路由器的每一个接口都是有一个不同的网络号的IP地址。
- 两个路由器直接相连的接口处，可指明也可不指明IP地址。如指明ip地址，则这一段连线就构成了一种只包含一段线路的特俗“网络”。现在常不指明IP地址。
- 

------

### 4.2.3 IP 地址与硬件地址

- **硬件地址是**物理层和数据链路层使用的地址
- **IP地址**是IP数据报在网络层及以上各层使用的一种逻辑地址
- **MAC帧中的源地址和目的地址都是硬件地址**，整个IP数据报在物理层被封装在数据部分，IP地址对数据链路层不可见
- 数据报在路由其之间传送时，途径的路由器地址不出现在IP数据报中，当前路由器根据目的IP地址自主路由出下一路由器地址
- 分组每次经过路由器转发时都要将MAC的首部和尾部丢弃重新封装——**变换MAC帧中的目的地址和源地址**
- 

------

### 地址解析协议ARP

**ARP协议**:根据已知的IP地址解析出该主机的硬件地址

- RARP协议:**根据硬件地址解析出该主机对应的IP地址 -** 主机ARP高速缓存

  :用来存放从IP地址映射硬件地址的映射表,并且动态更新(方法:新增或超时删除)这个映射表;

  - 新增的方法:
    - 通过向本局域网内所有的主机发送ARP请求分组,在得到响应分组后便将这个目的主机的硬件地址写入ARP高速缓存中
    - 同时,ARP高速缓存中对每个硬件地址都设置了生存时间,超过生存时间的硬件地址便进行删除操作,便于进行动态更新,防止出现发送到错误(过时的)硬件地址处;
    - 地址解析协议ARP只能用来解决同一个局域网（包括该网络和与该网络相连的路由器）内的地址映射，网络之间的路由并能不能做到；
    - 从硬件地址到IP地址的解析每次转发分组时都要重复进行，但这种开销是不可避免的，是为方便的在各种异构网络之间进行转发工作而屏蔽网络硬件之间的异构性，从而体现出虚拟网络的含义